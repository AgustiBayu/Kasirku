{{ define "title" }}Edit Product{{ end }}

{{ define "content" }}
    <div class="container">
        <h1>Edit Product</h1>
        <form action="/product/edit/{{.Product.ID}}" method="post">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="{{.Product.Name}}">
            </div>
            <div class="form-group">
                <label for="slug">Slug</label>
                <input type="text" class="form-control" id="slug" name="slug" value="{{.Product.Slug}}">
            </div>
            <div class="form-group">
                <label for="barcode">Barcode</label>
                <input type="text" class="form-control" id="barcode" name="barcode" value="{{.Product.Barcode}}">
            </div>
            <div class="form-group">
                <label for="price">Price</label>
                <input type="number" class="form-control" id="price" name="price" value="{{.Product.Price}}">
            </div>
            <div class="form-group">
                <label for="exp">Exp</label>
                <input type="date" class="form-control" id="exp" name="exp" value="{{.Product.Exp}}">
            </div>
            <div class="form-group">
                <label for="stock">Stock</label>
                <input type="number" class="form-control" id="stock" name="stock" value="{{.Product.Stock}}">
            </div>
            <div class="form-group">
                <label for="category_id">Category</label>
                <select class="form-control" id="category_id" name="category_id">
                    <option value="">Select Category</option>
                    {{range .Categories}}
                    <option value="{{.ID}}" {{if eq .ID $.Product.CategoryID}}selected{{end}}>{{.Category}}</option>
                    {{end}}
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Update Product</button>
        </form>

        <hr>

        <h2>Thumbnail</h2>
        {{if .Product.Thumbnail}}
            <img src="/{{.Product.Thumbnail}}" alt="Current Thumbnail" style="max-width: 200px; display: block; margin-bottom: 10px;">
        {{else}}
            <p>No thumbnail uploaded.</p>
        {{end}}

        <form action="/product/upload-thumbnail/{{.Product.ID}}" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label for="thumbnail">Upload New Thumbnail</label>
                <input type="file" class="form-control-file" id="thumbnail" name="thumbnail">
            </div>
            <button type="submit" class="btn btn-secondary">Upload Image</button>
        </form>
    </div>
{{ end }}
{{ template "layout" . }}